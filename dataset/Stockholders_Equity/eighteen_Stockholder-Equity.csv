"CONSOLIDATED STATEMENTS OF STOCKHOLDERS' EQUITY - USD ($) shares in Thousands, $ in Thousands",Total,Common Stock,Additional Paid-in Capital,Accumulated Deficit,Accumulated Other Comprehensive Loss,,,
"Balance, beginning of period, shares at Dec. 31, 2014",,642385,,,,,,
"Balance, beginning of period at Dec. 31, 2014",,3,5208870,-1572446,-10024,,,
"Issuance of common stock in connection with RSU vesting, shares",,24002,,,,,,
"Issuance of common stock in connection with acquisitions, shares",,13613,,,,,,
Issuance of common stock in connection with acquisitions,,,516538,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,2533,,,,,,
"Exercise of stock options, shares",,10992,,,,,,
Exercise of stock options,,,17914,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",,1525,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,39295,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-281,,,,,,
Shares withheld related to net share settlement of equity awards,,,-11101,,,,,
Stock-based compensation,,,729193,,,,,
"Other activities, shares",,-637,,,,,,
Other activities,,,6378,,,,,
Other comprehensive income (loss),-35542,,,,-35542,,,
Net loss,-521031,,,-521031,,,,
"Balance, end of period, shares at Dec. 31, 2015",694132,694132,,,,,,
"Balance, end of period at Dec. 31, 2015",4368047,3,6507087,-2093477,-45566,,,
"Issuance of common stock in connection with RSU vesting, shares",,26909,,,,,,
Issuance of common stock in connection with RSU vesting,,1,,,,,,
"Issuance of common stock in connection with acquisitions, shares",,41,,,,,,
Issuance of common stock in connection with acquisitions,,,735,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,3364,,,,,,
"Exercise of stock options, shares",,2864,,,,,,
Exercise of stock options,,,7714,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",2000,2039,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,24431,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-878,,,,,,
Shares withheld related to net share settlement of equity awards,,,-15598,,,,,
Cancellation of shares contributed by the CEO,,-6814,,,,,,
Stock-based compensation,,,695525,,,,,
"Other activities, shares",,-85,,,,,,
Other activities,,,4640,,,,,
Other comprehensive income (loss),-23687,,,,-23687,,,
Net loss,-456873,,,-456873,,,,
"Balance, end of period, shares at Dec. 31, 2016",721572,721572,,,,,,
"Balance, end of period at Dec. 31, 2016",4604935,4,7224534,-2550350,-69253,,,
"Issuance of common stock in connection with RSU vesting, shares",,20855,,,,,,
"Exercise of stock options, shares",3733,3733,,,,,,
Exercise of stock options,,,9515,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1700,1735,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,23920,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-531,,,,,,
Shares withheld related to net share settlement of equity awards,,,-8962,,,,,
Stock-based compensation,,,488123,,,,,
"Other activities, shares",,-462,,,,,,
Other activities,,,76,,,,,
Other comprehensive income (loss),37674,,,,37674,,,
Net loss,-108063,,,-108063,,,,
"Balance, end of period, shares at Dec. 31, 2017",746902,746902,,,,,,
"Balance, end of period at Dec. 31, 2017",5047218,4,7750522,-2671729,-31579,,,
Cumulative-effect adjustment from adoption of stock-based compensation expense simplification rule,,,13316,-13316,,,,
