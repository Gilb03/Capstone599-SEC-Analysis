"CONSOLIDATED STATEMENTS OF REDEEMABLE CONVERTIBLE PREFERRED STOCK, CONVERTIBLE PREFERRED STOCK AND STOCKHOLDERS' EQUITY - USD ($) shares in Thousands, $ in Thousands",Total,Redeemable Convertible Preferred Stock,Convertible Preferred Stock,Common Stock,Common StockRedeemable Convertible Preferred Stock,Common StockConvertible Preferred Stock,Additional Paid-in Capital,Accumulated Other Comprehensive Loss,Accumulated Deficit,
"Balance, beginning of period at Dec. 31, 2012",,37106,835430,1,,,101787,-657,-349303,
"Balance, beginning of period, shares at Dec. 31, 2012",,3569,329575,125597,,,,,,
"Forfeiture of restricted stock, shares",,-45,,,,,,,,
Conversion of preferred stock to common stock,,-37106,-835430,,,2,872534,,,
"Conversion of preferred stock to common stock, shares",,-3524,-329575,,3524,329575,,,,
"Balance, end of period at Dec. 31, 2013",2950006,,,3,,,3944952,-323,-994626,
"Balance, end of period, shares at Dec. 31, 2013",569922,,,569922,,,,,,
Issuance of stock in connection with acquisitions,,,,,,,335913,,,
"Issuance of stock in connection with acquisitions, shares",,,,17665,,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for stock-based compensation, shares",,,,5775,,,,,,
Exercise of stock options,,,,,,,8751,,,
"Exercise of stock options, shares",,,,7408,,,,,,
Issuance of common stock upon initial public offering,,,,,,,2019741,,,
"Issuance of common stock upon initial public offering, shares",,,,80500,,,,,,
"Other activities, shares",,,,-122,,,,,,
Shares withheld related to net share settlement of equity awards,,,,,,,-14637,,,
Stock-based compensation,,,,,,,596148,,,
Reclassification of preferred stock liability and preferred stock warrant liability to additional paid-in capital,,,,,,,24241,,,
Other activities,,,,,,,474,,,
Other comprehensive income (loss),334,,,,,,,334,,
Net loss,-645323,,,,,,,,-645323,
"Conversion of preferred stock to common stock, shares",,,,,,329575,,,,
"Balance, end of period at Dec. 31, 2014",3626403,,,3,,,5208870,-10024,-1572446,
"Balance, end of period, shares at Dec. 31, 2014",642385,,,642385,,,,,,
"Issuance of common stock in connection with RSU vesting, shares",,,,42748,,,,,,
Issuance of stock in connection with acquisitions,,,,,,,147958,,,
"Issuance of stock in connection with acquisitions, shares",,,,3326,,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for stock-based compensation, shares",,,,2337,,,,,,
Exercise of stock options,,,,,,,28881,,,
"Exercise of stock options, shares",,,,22447,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,,,,,42402,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1900,,,1887,,,,,,
Issuance of common stock upon initial public offering,,,,,,,-240,,,
"Shares withheld related to net share settlement of equity awards, shares",,,,-307,,,,,,
"Other activities, shares",,,,25,,,,,,
Shares withheld related to net share settlement of equity awards,,,,,,,-17053,,,
Stock-based compensation,,,,,,,672371,,,
"Equity component of the convertible note issuance, net",,,,,,,505982,,,
Purchase of convertible note hedge,,,,,,,-407169,,,
Issuance of warrants,,,,,,,289272,,,
Other activities,,,,,,,1514,,,
Other comprehensive income (loss),-9701,,,,,,,-9701,,
Net loss,-577820,,,,,,,,-577820,
"Balance, end of period at Dec. 31, 2015",4368047,,,3,,,6507087,-45566,-2093477,
"Balance, end of period, shares at Dec. 31, 2015",642132,,,694132,,,,,,
"Issuance of common stock in connection with RSU vesting, shares",,,,24002,,,,,,
Issuance of stock in connection with acquisitions,,,,,,,516538,,,
"Issuance of stock in connection with acquisitions, shares",,,,13613,,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for stock-based compensation, shares",,,,2533,,,,,,
Exercise of stock options,,,,,,,17914,,,
"Exercise of stock options, shares",10992,,,10992,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,,,,,39295,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1500,,,1525,,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,,,-281,,,,,,
"Other activities, shares",,,,-637,,,,,,
Shares withheld related to net share settlement of equity awards,,,,,,,-11101,,,
Stock-based compensation,,,,,,,729193,,,
Other activities,,,,,,,6378,,,
Other comprehensive income (loss),-35542,,,,,,,-35542,,
Net loss,-521031,,,,,,,,-521031,
