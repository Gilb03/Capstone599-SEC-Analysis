"CONSOLIDATED STATEMENTS OF STOCKHOLDERS' EQUITY - USD ($) shares in Thousands, $ in Thousands",Total,Common Stock,Additional Paid-in Capital,Accumulated Other Comprehensive Loss,Retained earnings (accumulated deficit),,,
"Balance, beginning of period, shares at Dec. 31, 2016",,721572,,,,,,
"Balance, beginning of period at Dec. 31, 2016",,4,7224534,-69253,-2550350,,,
"Issuance of common stock in connection with RSU vesting, shares",,20855,,,,,,
"Exercise of stock options, shares",,3733,,,,,,
Exercise of stock options,,,9515,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",,1735,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,23920,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-531,,,,,,
Shares withheld related to net share settlement of equity awards,,,-8962,,,,,
Stock-based compensation,,,488123,,,,,
Purchase of convertible note hedge,0,,,,,,,
"Other activities, shares",,-462,,,,,,
Other activities,,,76,,,,,
Other comprehensive income (loss),37674,,,37674,,,,
Net income (loss),-108063,,,,-108063,,,
"Balance, end of period, shares at Dec. 31, 2017",746902,746902,,,,,,
"Balance, end of period at Dec. 31, 2017",5047218,4,7750522,-31579,-2671729,,,
"Issuance of common stock in connection with RSU vesting, shares",,15026,,,,,,
Cumulative-effect adjustment from adoption of revenue recognition rule | Adoption of ASC Topic 606,,,,,12060,,,
"Issuance of common stock in connection with acquisitions, shares",,119,,,,,,
Issuance of common stock in connection with acquisitions,,,5405,,,,,
Issuance of stock options in connection with acquisitions,,,917,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,655,,,,,,
Issuance of restricted stock in connection with acquisitions,,,12843,,,,,
"Exercise of stock options, shares",,634,,,,,,
Exercise of stock options,,,3442,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1500,1539,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,29288,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-610,,,,,,
Shares withheld related to net share settlement of equity awards,,,-19256,,,,,
Stock-based compensation,,,367668,,,,,
"Equity component of the convertible note issuance, net",,,252248,,,,,
Purchase of convertible note hedge,267950,,-267950,,,,,
Issuance of warrants,,,186760,,,,,
"Other activities, shares",,-8,,,,,,
Other activities,,,3087,,,,,
Other comprehensive income (loss),-33732,,,-33732,,,,
Net income (loss),1205596,,,,1205596,,,
"Balance, end of period, shares at Dec. 31, 2018",764257,764257,,,,,,
"Balance, end of period at Dec. 31, 2018",6805594,4,8324974,-65311,-1454073,,,
"Issuance of common stock in connection with RSU vesting, shares",,13519,,,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,471,,,,,,
"Exercise of stock options, shares",361,361,,,,,,
Exercise of stock options,,,788,,,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1600,1592,,,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,42378,,,,,
"Shares withheld related to net share settlement of equity awards, shares",,-579,,,,,,
Shares withheld related to net share settlement of equity awards,,,-19594,,,,,
Stock-based compensation,,,414784,,,,,
Purchase of convertible note hedge,0,,,,,,,
"Other activities, shares",,-2,,,,,,
Other comprehensive income (loss),-5223,,,-5223,,,,
Net income (loss),1465659,,,,1465659,,,
"Balance, end of period, shares at Dec. 31, 2019",779619,779619,,,,,,
"Balance, end of period at Dec. 31, 2019",8704386,4,8763330,-70534,11586,,,
