"CONSOLIDATED STATEMENTS OF STOCKHOLDERS' EQUITY - USD ($) shares in Thousands, $ in Thousands",Total,Common Stock,Additional Paid-in Capital,Accumulated Other Comprehensive Loss,Accumulated Deficit,
"Balance, beginning of period at Dec. 31, 2013",,3,3944952,-323,-994626,
"Balance, beginning of period, shares at Dec. 31, 2013",,569922,,,,
"Issuance of common stock in connection with RSU vesting, shares",,42748,,,,
Issuance of common stock in connection with acquisitions,,,147958,,,
"Issuance of common stock in connection with acquisitions, shares",,3326,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,2337,,,,
Exercise of stock options,,,28881,,,
"Exercise of stock options, shares",,22447,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,42402,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",,1887,,,,
Shares withheld related to net share settlement of equity awards,,,-17053,,,
"Shares withheld related to net share settlement of equity awards, shares",,-307,,,,
Stock-based compensation,,,672371,,,
"Equity component of the convertible note issuance, net",,,505982,,,
Purchase of convertible note hedge,,,-407169,,,
Issuance of warrants,,,289272,,,
Other activities,,,1274,,,
"Other activities, shares",,25,,,,
Other comprehensive income (loss),-9701,,,-9701,,
Net loss,-577820,,,,-577820,
"Balance, end of period at Dec. 31, 2014",3626403,3,5208870,-10024,-1572446,
"Balance, end of period, shares at Dec. 31, 2014",642385,642385,,,,
"Issuance of common stock in connection with RSU vesting, shares",,24002,,,,
Issuance of common stock in connection with acquisitions,,,516538,,,
"Issuance of common stock in connection with acquisitions, shares",,13613,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,2533,,,,
Exercise of stock options,,,17914,,,
"Exercise of stock options, shares",,10992,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,39295,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",1500,1525,,,,
Shares withheld related to net share settlement of equity awards,,,-11101,,,
"Shares withheld related to net share settlement of equity awards, shares",,-281,,,,
Stock-based compensation,,,729193,,,
Other activities,,,6378,,,
"Other activities, shares",,-637,,,,
Other comprehensive income (loss),-35542,,,-35542,,
Net loss,-521031,,,,-521031,
"Balance, end of period at Dec. 31, 2015",4368047,3,6507087,-45566,-2093477,
"Balance, end of period, shares at Dec. 31, 2015",694132,694132,,,,
Issuance of common stock in connection with RSU vesting,,1,,,,
"Issuance of common stock in connection with RSU vesting, shares",,26909,,,,
Issuance of common stock in connection with acquisitions,,,735,,,
"Issuance of common stock in connection with acquisitions, shares",,41,,,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",,3364,,,,
Exercise of stock options,,,7714,,,
"Exercise of stock options, shares",2864,2864,,,,
Issuance of common stock upon purchases under employee stock purchase plan,,,24431,,,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",2000,2039,,,,
Shares withheld related to net share settlement of equity awards,,,-15598,,,
"Shares withheld related to net share settlement of equity awards, shares",,-878,,,,
Cancellation of shares contributed by the CEO,,-6814,,,,
Stock-based compensation,,,695525,,,
Other activities,,,4640,,,
"Other activities, shares",,-85,,,,
Other comprehensive income (loss),-23687,,,-23687,,
Net loss,-456873,,,,-456873,
"Balance, end of period at Dec. 31, 2016",4604935,4,7224534,-69253,-2550350,
"Balance, end of period, shares at Dec. 31, 2016",721572,721572,,,,
