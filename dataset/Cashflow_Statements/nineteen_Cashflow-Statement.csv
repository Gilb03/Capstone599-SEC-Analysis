"CONSOLIDATED STATEMENTS OF STOCKHOLDERS' EQUITY - USD ($) shares in Thousands, $ in Thousands",Total,Common Stock,Additional Paid-in Capital,Accumulated Deficit,Accumulated Other Comprehensive Loss
"Balance, beginning of period, shares at Dec. 31, 2015",," 694,132 ",,,
"Balance, beginning of period at Dec. 31, 2015",, $ 3 ," $ 6,507,087 "," $ (2,093,477)"," $ (45,566)"
"Issuance of common stock in connection with RSU vesting, shares",," 26,909 ",,,
Issuance of common stock in connection with RSU vesting,, $ 1 ,,,
"Issuance of common stock in connection with acquisitions, shares",, 41 ,,,
Issuance of common stock in connection with acquisitions,,, 735 ,,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",," 3,364 ",,,
"Exercise of stock options, shares",," 2,864 ",,,
Exercise of stock options,,," 7,714 ",,
"Issuance of common stock upon purchases under employee stock purchase plan, shares",," 2,039 ",,,
Issuance of common stock upon purchases under employee stock purchase plan,,," 24,431 ",,
"Shares withheld related to net share settlement of equity awards, shares",,(878),,,
Shares withheld related to net share settlement of equity awards,,,"(15,598)",,
Cancellation of shares contributed by the CEO,,"(6,814)",,,
Stock-based compensation,,," 695,525 ",,
"Other activities, shares",,(85),,,
Other activities,,," 4,640 ",,
Other comprehensive income (loss)," $ (23,687)",,,,"(23,687)"
Net income (loss)," $ (456,873)",,,"(456,873)",
"Balance, end of period, shares at Dec. 31, 2016"," 721,572 "," 721,572 ",,,
"Balance, end of period at Dec. 31, 2016"," $ 4,604,935 ", $ 4 ," 7,224,534 ","(2,550,350)","(69,253)"
"Issuance of common stock in connection with RSU vesting, shares",," 20,855 ",,,
"Exercise of stock options, shares",," 3,733 ",,,
Exercise of stock options,,," 9,515 ",,
"Issuance of common stock upon purchases under employee stock purchase plan, shares"," 1,700 "," 1,735 ",,,
Issuance of common stock upon purchases under employee stock purchase plan,,," 23,920 ",,
"Shares withheld related to net share settlement of equity awards, shares",,(531),,,
Shares withheld related to net share settlement of equity awards,,,"(8,962)",,
Stock-based compensation,,," 488,123 ",,
"Other activities, shares",,(462),,,
Other activities,,, 76 ,,
Other comprehensive income (loss)," $ 37,674 ",,,," 37,674 "
Net income (loss)," $ (108,063)",,,"(108,063)",
"Balance, end of period, shares at Dec. 31, 2017"," 746,902 "," 746,902 ",,,
"Balance, end of period at Dec. 31, 2017"," $ 5,047,218 ", $ 4 ," 7,750,522 ","(2,671,729)","(31,579)"
Cumulative-effect adjustment from adoption of stock-based compensation expense simplification rule,,," 13,316 ","(13,316)",
"Issuance of common stock in connection with RSU vesting, shares",," 15,026 ",,,
"Issuance of common stock in connection with acquisitions, shares",, 119 ,,,
Issuance of common stock in connection with acquisitions,,," 5,405 ",,
"Issuance of restricted stock in connection with acquisitions accounted for as stock-based compensation, shares",, 655 ,,,
Issuance of stock options in connection with acquisitions,,, 917 ,,
Issuance of restricted stock in connection with acquisitions,,," 12,843 ",,
"Exercise of stock options, shares", 634 , 634 ,,,
Exercise of stock options,,," 3,442 ",,
"Issuance of common stock upon purchases under employee stock purchase plan, shares"," 1,500 "," 1,539 ",,,
Issuance of common stock upon purchases under employee stock purchase plan,,," 29,288 ",,
"Shares withheld related to net share settlement of equity awards, shares",,(610),,,
Shares withheld related to net share settlement of equity awards,,,"(19,256)",,
Stock-based compensation,,," 367,668 ",,
"Equity component of the convertible note issuance, net",,," 252,248 ",,
Purchase of convertible note hedge," $ 267,950 ",,"(267,950)",,
Issuance of warrants,,," 186,760 ",,
"Other activities, shares",,(8),,,
Other activities,,," 3,087 ",,
Other comprehensive income (loss),"(33,732)",,,,"(33,732)"
Cumulative-effect adjustment from adoption of revenue recognition rule,,,," 12,060 ",
Net income (loss)," $ 1,205,596 ",,," 1,205,596 ",
"Balance, end of period, shares at Dec. 31, 2018"," 764,257 "," 764,257 ",,,
"Balance, end of period at Dec. 31, 2018"," $ 6,805,594 ", $ 4 ," $ 8,324,974 "," $ (1,454,073)"," $ (65,311)"