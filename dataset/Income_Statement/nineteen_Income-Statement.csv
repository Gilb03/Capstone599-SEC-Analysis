CONSOLIDATED STATEMENTS OF COMPREHENSIVE INCOME (LOSS) - USD ($) $ in Thousands,12 Months Ended,,
,"Dec. 31, 2018","Dec. 31, 2017","Dec. 31, 2016"
Statement Of Income And Comprehensive Income [Abstract],,,
Net income (loss)," $ 1,205,596 "," $ (108,063)"," $ (456,873)"
"Other comprehensive income (loss), net of tax:",,,
Change in unrealized gain (loss) on investments in available-for-sale securities,(393),"(1,325)"," 1,685 "
Change in foreign currency translation adjustment,"(33,339)"," 38,999 ","(25,372)"
Net change in accumulated other comprehensive income (loss),"(33,732)"," 37,674 ","(23,687)"
Comprehensive income (loss)," $ 1,171,864 "," $ (70,389)"," $ (480,560)"